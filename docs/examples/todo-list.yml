$(#root): app

app:
  - yx-from: input
    id: item-desc
    placeholder: "Item description"
  - yx-button: "Add"
    hx-push: "/add-item"
    hx-vals: 'js:{desc: document.getElementById("item-desc").value}'
    hx-target: "#item-list"
  - yx-from: ul
    id: item-list
    body: yx-get-items
  
list-item:
  class: flex justify-between items-center p-2 border-b
  id: "item-$id"
  yx-li: 
    - yx-span: $description
    - yx-delete-button: $id

delete-button:
  yx-button: "Delete"
  hx-push: "/delete-item"
  hx-vals: 'js:{id: $id}'
  hx-target: "#item-list"

get-items(sql): SELECT id, description FROM todo_items

update-items(pipe):
  - yx-sql: $query;SELECT id, description FROM todo_items
  - yx-list-item

delete-item(update-items):
  DELETE FROM todo_items WHERE id = $id
  
add-item(update-items):
  INSERT INTO todo_items (description) VALUES ($desc)