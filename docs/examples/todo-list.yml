$(#root): app

app:
  - yx-from: input
    id: item-desc
    placeholder: "Item description"
  - yx-button: "Add"
    hx-push: "/add-item"
    hx-vals: 'js:{desc: document.getElementById("item-desc").value}'
    hx-target: "#item-list"
  - yx-ul: yx-get-items
    id: "item-list"
  
list-item:
  class: flex justify-between items-center p-2 border-b
  id: "item-$id"
  yx-li: 
    - yx-span: $description
    - yx-button: "Delete"
      hx-push: "/delete-item"
      hx-vals: 'js:{id: $id}'
      hx-target: "#item-list"

get-items:
  yx-seq:
    - yx-sql: SELECT id, description FROM todo_items;
    - yx-list-item

delete-item:
  - yx-sql: DELETE FROM todo_items WHERE id = $id
  - yx-get-items

add-item:
  yx-seq:
    - yx-sql: INSERT INTO todo_items (description) VALUES ($desc)
    - yx-get-items
